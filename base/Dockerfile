# Use edge until 3.4 is released
FROM alpine:edge

MAINTAINER Josh Sorenson <josh@crowsnest.io>

RUN mkdir -p /opt

RUN apk update && apk add tar curl gnupg python openjdk8 bash

RUN gpg --recv-keys E80B8FFD
RUN curl -s https://archive.apache.org/dist/storm/apache-storm-1.0.1/apache-storm-1.0.1.tar.gz.asc -o apache-storm-1.0.1.tar.gz.asc && \
    curl -s https://archive.apache.org/dist/storm/apache-storm-1.0.1/apache-storm-1.0.1.tar.gz -o apache-storm-1.0.1.tar.gz && \
    gpg --verify apache-storm-1.0.1.tar.gz.asc apache-storm-1.0.1.tar.gz && \
    tar zxf apache-storm-1.0.1.tar.gz -C /opt && \
    mv /opt/apache-storm-1.0.1 /opt/apache-storm && \
    rm apache-storm-1.0.1.tar.gz apache-storm-1.0.1.tar.gz.asc

ADD configure.sh /
